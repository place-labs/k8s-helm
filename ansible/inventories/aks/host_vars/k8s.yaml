# AKS-specific overrides for PlaceOS
# This file contains only the differences from the base configuration in group_vars/all/k8s_base.yaml
# The final configuration is created by: placeos = placeos_base | combine(placeos_override, recursive=True)

# Cluster Info ConfigMap (used by admins and upgrade jobs)
cluster_info:
  name: "default" # eg. PlaceOS PROD
  environment: "default" # eg. production, staging, development
  region: "default" # eg. australiaeast

# Internal Load Balancer for ingress-nginx - default: false
xinternalLB: &internalLB "{{ internalLB | default(false, true)}}"

# Override PlaceOS services with AKS-specific configuration
placeos_override:
  # dispatch - Azure load balancer annotations
  dispatch:
    udpLoadbalancer:
      annotations:
        service.beta.kubernetes.io/azure-load-balancer-internal: "true"
    tcpLoadbalancer:
      annotations:
        service.beta.kubernetes.io/azure-load-balancer-internal: "true"
  
# Third-party service overrides for AKS
ingress_nginx:
  controller:
    service:
      annotations:
        "service.beta.kubernetes.io/azure-load-balancer-health-probe-request-path": "/healthz"
        "service.beta.kubernetes.io/azure-load-balancer-internal": *internalLB
