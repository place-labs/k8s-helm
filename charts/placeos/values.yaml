# Default values for placeos.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

###############################
##### Configmap Variable #####
###############################
x-rethinkdbPassword: &rethinkdbPassword "password"
x-smtpPassword: &smtpPassword ""
x-placePassword: &placePassword "development"
x-serverSecret: &serverSecret "development"
x-placeDomain: &placeDomain "localhost"
x-mediumPriorityClassName: &mediumPriorityClassName medium
x-highPriorityClassName: &highPriorityClassName high

x-deployment-env: &deployment-env
  ENV: development
  SG_ENV: development
  TZ: Australia/Sydney

x-elastic-client-env: &elastic-client-env
  ES_HOST: elasticsearch-master
  ES_PORT: 9200

x-etcd-client-env: &etcd-client-env
  ETCD_HOST: etcd-headless
  ETCD_PORT: 2379

x-place-loader-client-env: &place-loader-client-env
  PLACE_LOADER_URI: http://frontends:3000

x-redis-client-env: &redis-client-env
  REDIS_URL: redis://redis-headless:6379

x-rethinkdb-client-env: &rethinkdb-client-env
  RETHINKDB_HOST: rethinkdb-proxy
  RETHINKDB_PORT: 28015
  RETHINKDB_DB: place_development
  RETHINKDB_USER: admin

x-rethinkdb-client-secrets: &rethinkdb-client-secrets
  RETHINKDB_PASSWORD: *rethinkdbPassword

x-rubber-soul-client-env: &rubber-soul-client-env
  RUBBER_SOUL_URI: http://rubber-zoul:3000

x-smtp-client-env: &smtp-client-env
  SMTP_SERVER: ""
  SMTP_PORT: 587
  SMTP_USER: ""
  SMTP_SECURE: ""

x-smtp-client-secrets: &smtp-client-secrets
  SMTP_PASS: *smtpPassword

x-dispatch-secrets: &dispatch-secrets
  SERVER_SECRET: *serverSecret

############################
##### PlaceOS Services #####
############################
api:
  enabled: true
  fullnameOverride: api
  deployment:
    podPriorityClassName: *highPriorityClassName
  ingress:
    secretName: *placeDomain
  configmap:
    # Environment
    << : *deployment-env
    # Service Hosts
    << : *elastic-client-env
    << : *etcd-client-env
    << : *place-loader-client-env
    << : *redis-client-env
    << : *rethinkdb-client-env
    << : *rubber-soul-client-env
  secrets:
    << : *rethinkdb-client-secrets
auth:
  enabled: true
  fullnameOverride: auth
  deployment:
    podPriorityClassName: *highPriorityClassName
  ingress:
    secretName: *placeDomain
  configmap:
    << : *rethinkdb-client-env
    COAUTH_NO_SSL: "true"
    TZ: ""
  secrets:
    << : *rethinkdb-client-secrets
core:
  enabled: true
  fullnameOverride: core
  deployment:
    replicaCount: 1
    podPriorityClassName: *highPriorityClassName
  configmap:
    # Service Hosts
    << : *etcd-client-env
    << : *redis-client-env
    << : *rethinkdb-client-env
    # Environment
    << : *deployment-env
  secrets:
    << : *rethinkdb-client-secrets
dispatch:
  enabled: true
  fullnameOverride: dispatch
  deployment:
    replicaCount: 1
  configmap:
  secrets:
    << : *dispatch-secrets
frontends:
  enabled: true
  fullnameOverride: frontends
  ingress:
    secretName: *placeDomain
  deployment:
    podPriorityClassName: *mediumPriorityClassName
  configmap:
    PLACE_LOADER_WWW: www
    << : *rethinkdb-client-env
    # Environment
    << : *deployment-env
  secrets:
    << : *rethinkdb-client-secrets
rubber-soul:
  enabled: true
  fullnameOverride: rubber-zoul
  configmap:
    # Service Hosts
    << : *rethinkdb-client-env
    << : *elastic-client-env
    # Environment
    << : *deployment-env
  secrets:
    << : *rethinkdb-client-secrets
triggers:
  enabled: true
  fullnameOverride: triggers
  configmap:
    # Service Hosts
    << : *etcd-client-env
    << : *redis-client-env
    << : *rethinkdb-client-env
    << : *smtp-client-env
    # Environment
    << : *deployment-env
  secrets:
    << : *rethinkdb-client-secrets
    << : *smtp-client-secrets
init:
  enabled: true
  domain:
    cname: *placeDomain
    altNames:
      - 127.0.0.1
  podPriorities:
    mediumClassName: *mediumPriorityClassName
    highClassName: *highPriorityClassName
  configmap:
    # User/Application Configuration
    PLACE_DOMAIN: localhost:8443
    PLACE_APPLICATION: backoffice
    PLACE_AUTH_HOST: auth:3000
    PLACE_USERNAME: "Place Support (localhost:8443)"
    PLACE_EMAIL: support@place.tech
    PLACE_TLS: true
    # Service Hosts
    << : *rethinkdb-client-env
    << : *elastic-client-env
    # Environment
    << : *deployment-env
  secrets:
    << : *rethinkdb-client-secrets
    PLACE_PASSWORD: *placePassword

###########################################
##### Third Party Supporting Services #####
###########################################
etcd:
  enabled: true
  fullnameOverride: etcd
  auth:
    rbac:
      enabled: false
elasticsearch:
  enabled: true
  templateOverrides:
    elasticsearchMasterfullName: elasticsearch-master
  master:
    replicas: 1
  data:
    replicas: 1
  coordinating:
    replicas: 0
rethinkdb:
  enabled: true
  templateOverrides:
    rethinkdbFullName: rethinkdb
  cluster:
    replicas: 1
  rethinkdbPassword: *rethinkdbPassword
redis:
  enabled: true
  fullnameOverride: redis
  usePassword: false
  cluster:
    enabled: false
  configmap: |-
    notify-keyspace-events Kg$
influxdb:
  enabled: true
  fullnameOverride: influxdb
mosquitto:
  enabled: false
  fullnameOverride: mosquitto


# global:
#   namespace: 